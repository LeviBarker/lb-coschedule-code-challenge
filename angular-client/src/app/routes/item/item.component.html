<div class="page-container">
    <div class="page-inner-container">
        <button mat-stroked-button class="icon-button icon-left" (click)="goBack()">
            <mat-icon>arrow_back</mat-icon>
            <span>Back</span>
        </button>
        <div class="item-container" *ngIf="item">
            <div class="item-inner-container">
                <img class="banner-image" [src]="item.images.original.url" />
                <div class="mat-title item-title">{{item.title}}</div>
                <div>
                    <app-comment-input [sourceId]="sourceId" (onCommentAdded)="handleCommentAdded($event)">
                    </app-comment-input>
                    <ng-container *ngIf="auth.user$ | async as user; else commentsTemplate">
                        <ng-container *ngTemplateOutlet="commentsTemplate; context: user"></ng-container>
                    </ng-container>
                </div>
            </div>
        </div>
    </div>
</div>

<ng-template #commentsTemplate let-uid="uid">
    <app-comment *ngFor="let comment of item.comments" [comment]="comment" [uid]="uid"
        [editing]="comment.id === editingCommentId" (onDeleteClick)="handleDeleteClick($event)"
        (onEditClick)="handleEditClick($event)">
    </app-comment>
</ng-template>